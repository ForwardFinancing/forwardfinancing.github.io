<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Increasing Productivity with Scripts: Utilizing Mac&#39;s screencapture Utility</title>
  <meta name="description" content="I am a firm believer that there is almost always room for improvement in process, especially when it comes to automating tasks. As an Automation Engineer her...">

  <link rel="stylesheet" href="/assets/main.css">
  <link rel="canonical" href="http://localhost:4000/automation/scripts/2018/04/25/productivity-with-scripts-screencapture.html">
  <link rel="alternate" type="application/rss+xml" title="ForwardFinancing Engineering Blog" href="/feed.xml">
  
  
</head>


  <body>

    <header class="site-header" role="banner">

  <div class="wrapper">
    
    
    <a class="site-title" href="/">ForwardFinancing Engineering Blog</a>
  
    
      <nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
              <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
              <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger">
          
            
            
            <a class="page-link" href="/about/">About</a>
            
          
            
            
          
            
            
          
            
            
          
            
            
          
        </div>
      </nav>
    
  </div>
</header>


    <main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title" itemprop="name headline">Increasing Productivity with Scripts: Utilizing Mac&#39;s screencapture Utility</h1>
    <p class="post-meta">
      <time datetime="2018-04-25T12:00:00-04:00" itemprop="datePublished">
        
        Apr 25, 2018
      </time>
      
        • <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Scott Davidson</span></span>
      </p>
  </header>

  <div class="post-content" itemprop="articleBody">
    <p>I am a firm believer that there is almost always room for improvement in process, especially when it comes to automating tasks. As an Automation Engineer here at Forward Financing, I am always trying to ensure optimal productivity for my team. However, I am also constantly looking for improvements that I can make within my personal process to help me save time throughout the day.</p>

<p>A great way to accomplish this is by first identifying some cumbersome task, and then writing a script for it. Currently, I have many useful scripts on both my work and home computers to accomplish various things. These scripts may not be useful to everyone, but they help me accomplish tasks in a fraction of the time, and end up saving me minutes or hours in my week. Recently, I encountered an arduous daily process in my workflow that was taking me too much time and wrote a script to help me solve this problem.</p>

<p><strong>Note: The specific example showcased here assumes that you are on macOS</strong></p>

<h1 id="identifying-the-problem">Identifying the Problem</h1>

<p>Since I am constantly either QAing or communicating with engineers about features, I like to provide as much context as possible. I found that visual aides are very helpful at providing additional context surrounding an issue.</p>

<p>I primarily use a MacBook. Luckily, macOS provides users the ability to take screenshots. There are a few different ways to do this <a href="https://support.apple.com/en-us/HT201361">outlined here by Apple support</a>. Since I usually only want a portion of the screen, I prefer the shortcut: <code class="highlighter-rouge">command</code> + <code class="highlighter-rouge">shift</code> + <code class="highlighter-rouge">4</code> to select a capture area with my mouse.</p>

<p>I would take a screenshot, find it in my filesystem, open it, edit it, change the name, and then attach it to a message after finding it again in my filesystem. This required a lot of manual steps, and took a decent amount of time. I looked into ways of changing the default name and location of screenshots, but I wanted something a little more custom. After some digging, I found out that macOS has the <code class="highlighter-rouge">screencapture</code> utility that can be used in <code class="highlighter-rouge">Terminal</code>. (In your terminal, type <code class="highlighter-rouge">man screencapture</code> for more information). As soon as I discovered this, I immediately wanted to write a script so I could shave time off this arduous process.</p>

<h1 id="investigation-time">Investigation Time</h1>

<p>After learning of the <code class="highlighter-rouge">screencapture</code> utility, I began to explore its docs and try it out. I first identified what I wanted to accomplish with my script, and then looked for corresponding flags or variations on the command that would support the behavior I wanted.</p>

<p>I knew I wanted to specify a name and extension for my file on the fly. The following is from <code class="highlighter-rouge">man screencapture</code>.</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>SYNOPSIS
     screencapture [-SWCTMPcimswxto] file
</code></pre></div></div>
<p>I learned <code class="highlighter-rouge">&lt;file&gt;</code> is the path to destination of where the screenshot will be saved. I also knew that I wanted to select only a portion of the screen with my mouse when taking the screenshot. After exploring the documentation for this utility more I found the following flag.</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>-s      Only allow mouse selection mode.
</code></pre></div></div>
<p>So I came to the conclusion that I would be invoking the <code class="highlighter-rouge">screencapture</code> utility from my script as follows.</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>screencapture -s &lt;path_to_file&gt;
</code></pre></div></div>
<p>I felt comfortable enough with the utility to proceed after identifying how it would be used. All that was left was a matter of writing the bash script and making the file and extension names dynamic.</p>

<p>I also decided that it would be very helpful to have the <code class="highlighter-rouge">&lt;path_to_file&gt;</code> copied to my clipboard. This would make the file easy to open in preview on the command line after the script ran with the command: <code class="highlighter-rouge">open &lt;path_to_file&gt;</code>. Having the path to the clipboard would also make it easier to locate in <code class="highlighter-rouge">Finder</code> for Mac (You can enter absolute path in <code class="highlighter-rouge">Finder</code> with <code class="highlighter-rouge">command</code> + <code class="highlighter-rouge">shift</code> + <code class="highlighter-rouge">G</code>).
Luckily, Mac has the <code class="highlighter-rouge">pbcopy</code> command that allows you to paste to your system <code class="highlighter-rouge">Clipboard</code> via the command line. You can read more about <code class="highlighter-rouge">pbcopy</code> by typing <code class="highlighter-rouge">man pbcopy</code> in your terminal.</p>

<h1 id="writing-the-script">Writing The Script</h1>

<p>I will not go a ton into bash scripting in this tutorial. There are plenty of other great tutorials and resources for that online. However, I will provide a brief description of my thought process and detailed comments within the attached snippet for the script.</p>

<p>After looking into the <code class="highlighter-rouge">screencapture</code> utility, I learned that it requires one argument (<code class="highlighter-rouge">&lt;path_to_file&gt;</code>). This means that my script would at minimum require one argument as well. I didn’t want to type out an absolute path or always invoke the script from my screenshot directory, so I decided I would only pass the file’s base name to my script, and keep the path to my desired directory in a variable. I decided to concatenate the base file name argument with my desired directory within my script and pass this resulting absolute path to the <code class="highlighter-rouge">screencapture</code> command.</p>

<p>I decided that I may also want to specify the extension of the file. I’m usually fine with <code class="highlighter-rouge">png</code> as an extension. To limit keystrokes, I decided that this would be the default extension for my screenshots. I also decided to make the extension a second optional argument to my script.</p>
<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/bash</span>

<span class="c"># assign variable SCREENSHOT_DIR value of shell ENV value SCREENSHOT_DIR</span>
<span class="c"># if env SCREENSHOT_DIR is not defined, use $HOME as default directory</span>
<span class="nv">SCREENSHOT_DIR</span><span class="o">=</span><span class="k">${</span><span class="nv">SCREENSHOT_DIR</span><span class="k">:-</span><span class="s2">"</span><span class="nv">$HOME</span><span class="s2">"</span><span class="k">}</span>

<span class="c"># use /bin/test to determine if length of string is zero</span>
<span class="c">#   -z will return true if length of arg is zero</span>
<span class="c"># In this case, if the first argument to this script ($1) is not defined,</span>
<span class="c">#   throw error and exit script</span>
<span class="k">if</span> <span class="o">[[</span> <span class="nt">-z</span> <span class="s2">"</span><span class="nv">$1</span><span class="s2">"</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then
  </span><span class="nb">echo</span> <span class="s2">"ERROR: Please provide filename as first argument."</span>
  <span class="nb">exit </span>0
<span class="k">fi</span>

<span class="c"># assign variable EXT value of second argument passed to script</span>
<span class="c"># If no second argument is passed to script, assign 'png' as default extension</span>
<span class="nv">EXT</span><span class="o">=</span><span class="k">${</span><span class="nv">2</span><span class="k">:-</span><span class="s2">"png"</span><span class="k">}</span>

<span class="c"># define timestamp that will be appended to screencapture's file path</span>
<span class="c"># helpful to ensure screenshots with same name not overwritten</span>
<span class="c"># using date utility (man date) for more info</span>
<span class="nv">timestamp</span><span class="o">=</span><span class="k">$(</span>date +<span class="s2">"%H_%M_%S_%p"</span><span class="k">)</span>

<span class="c"># Combination of</span>
<span class="c">#   1. $SCREENSHOT_DIR defined above / in ENV variable</span>
<span class="c">#   2. $1, the first argument passed to the script</span>
<span class="c">#   3. $timestamp defined above</span>
<span class="c">#   4. $EXT defined above / in second argument passed to script</span>
<span class="nv">SCREENSHOT_PATH</span><span class="o">=</span><span class="s2">"</span><span class="nv">$SCREENSHOT_DIR</span><span class="s2">/</span><span class="nv">$1</span><span class="s2">-</span><span class="nv">$timestamp</span><span class="s2">.</span><span class="nv">$EXT</span><span class="s2">"</span>

<span class="c"># Add helpful output to STDOUT, notifying us of screenshot's destination</span>
<span class="nb">echo</span> <span class="s2">"screenshot will be saved to: </span><span class="nv">$SCREENSHOT_PATH</span><span class="s2">"</span>

<span class="c"># invoke screencapture, specifying mouse capture and absolute path of destination</span>
screencapture <span class="nt">-s</span> <span class="nv">$SCREENSHOT_PATH</span>
<span class="c"># At this point, mouse changes to cursor and use must select screenshot area.</span>

<span class="c"># This command will copy the path to our screenshot to our clipboard</span>
<span class="c"># Ready to paste with `command` + `V` shortcut</span>
<span class="nb">printf</span> <span class="s2">"</span><span class="nv">$SCREENSHOT_PATH</span><span class="s2">"</span> | pbcopy
<span class="nb">echo</span> <span class="s2">"This path to this screenshot has been copied to your clipboard."</span>
</code></pre></div></div>

<p>At this point you can also create a file and paste in the above code, for the sake of this tutorial I’ll say mine is at <code class="highlighter-rouge">~/screenshot.sh</code>.</p>

<p>This script may appear complicated at first sight, but it only took under 10 minutes to write!</p>

<h1 id="calling-our-script">Calling our Script</h1>

<p>As seen above in the script’s comments, it’s using an ENV var, <code class="highlighter-rouge">SCREENSHOT_DIR</code>. If this var is not exported to your shell, the default value in the script will be used.
Right now my default value is <code class="highlighter-rouge">"$HOME"</code>. You can either change that default value in your script, or define/export <code class="highlighter-rouge">SCREENSHOT_DIR</code> in the shell from which you run the script.</p>

<p>As mentioned in the last section, I decided to let this script take 2 arguments.
Assuming I saved my script to <code class="highlighter-rouge">~/screenshot.sh</code>, I can invoke it as follows.</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bash ~/screenshot.sh &lt;file_name&gt; [&lt;optional_extension&gt;]
</code></pre></div></div>
<p><code class="highlighter-rouge">&lt;file_name&gt;</code> - <strong>This is required</strong> By default, the file name is going to be <code class="highlighter-rouge">$SCREENSHOT_DIR/&lt;file_name&gt;.png</code>
<code class="highlighter-rouge">&lt;optional_extension&gt;</code> - (optional) If you don’t want the file extension to be <code class="highlighter-rouge">png</code> you can define it with this arg. This option could be <code class="highlighter-rouge">jpg</code> for a <code class="highlighter-rouge">.jpg</code> extension.</p>

<p>All you have to do is:</p>
<ol>
  <li>Run script</li>
  <li>Select area to capture with your mouse</li>
  <li>The path will be copied to your clipboard! If you need to open the file, you can just type <code class="highlighter-rouge">open</code>, then paste the path in to your terminal!</li>
</ol>

<h1 id="setting-up-a-bash-alias">Setting up a bash alias</h1>
<p>The point of this script in the first place was to save time. For that reason you probably don’t want to type <code class="highlighter-rouge">bash &lt;path_to_screenshot_script&gt; &lt;file_name&gt; [&lt;optional_extension&gt;]</code> every single time.
Luckily, it’s very easy to set up a bash alias for this script!
If you are unfamiliar with <code class="highlighter-rouge">aliases</code> in bash, there is an excellent overview here http://tldp.org/LDP/abs/html/aliases.html.</p>

<p>I chose to alias the execution of this script to <code class="highlighter-rouge">snap</code>. So instead of starting this command with <code class="highlighter-rouge">bash &lt;path_to_screenshot_script&gt;</code>, I can just type <code class="highlighter-rouge">snap</code>.
Note that you can make the following alias name whatever you want though…</p>

<p>Add the following to your <code class="highlighter-rouge">~/.bashrc</code>, <code class="highlighter-rouge">~/.bash_profile</code>, or anywhere that gets sourced when starting a new shell. (I suggest eventually setting up a file for all <code class="highlighter-rouge">aliases</code> like a <code class="highlighter-rouge">~/.bash_aliases</code> file. There are plenty of great tutorials for that online also).</p>

<p>For the purpose of this tutorial we’ll put our <code class="highlighter-rouge">alias</code> in <code class="highlighter-rouge">~/.bash_profile</code> since this should be getting sourced on your Mac.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">alias </span><span class="nv">snap</span><span class="o">=</span><span class="s2">"bash ~/scripts/screencapture.sh"</span>
</code></pre></div></div>
<p>As long as the above gets sourced when you open your new shell (or run <code class="highlighter-rouge">. ~/.bash_profile</code> to do in your current terminal), you will be able to use <code class="highlighter-rouge">snap</code> as an alias for our script!</p>

<h1 id="running-script-with-our-new-alias">Running Script With Our New Alias</h1>
<p>Now that our <code class="highlighter-rouge">alias</code> is set up, in your terminal, type:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>snap &lt;file_name&gt; [&lt;optional_path&gt;]
</code></pre></div></div>
<p>Even though we have an alias, the arguments the script accepts remain the same. Just like we saw when running the script without an alias, you will everything will work exactly as it did before.</p>

<p>Just to recap:</p>
<ol>
  <li>Run script</li>
  <li>Select area to capture with your mouse</li>
  <li>The path will be copied to your clipboard! If you need to open the file, you can just type <code class="highlighter-rouge">open</code>, then paste the path in to your terminal!</li>
</ol>

<h1 id="conclusion">Conclusion</h1>
<p>Hopefully after reading this, you will see how easy it is to make little tweaks in your workflow. As I mentioned before, the above script took me under 10 minutes to write. Now my cumbersome process of taking a screenshot is done right from my terminal in about a minute. I chose to write a bash script, but the above can be accomplished with pretty much any language you choose. I have used <code class="highlighter-rouge">Ruby</code>, <code class="highlighter-rouge">Perl</code>, and <code class="highlighter-rouge">Python</code> in the past to write scripts too!</p>

<p>Next time you find yourself wanting to complain about a task you are repeatedly performing, I suggest taking a step back and thinking about if there is a way to automate it. Even if it can’t be fully automated, I find that there is usually some way to make it less painful with the use of scripts. I’m always surprised how a script that takes minutes to write can ultimately save me many hours. As engineers, we have tools at our disposal to make our lives easier, it’s just a matter of identifying and implementing them.</p>

<p>Happy scripting!</p>

  </div>

  
</article>

      </div>
    </main>

    <footer class="site-footer">

  <div class="wrapper">

    <h2 class="footer-heading">ForwardFinancing Engineering Blog</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li>
            
              ForwardFinancing Engineering Blog
            
            </li>
            
            <li><a href="mailto:tech-management@forwardfinancing.com">tech-management@forwardfinancing.com</a></li>
            
        </ul>
      </div>

      <div class="footer-col footer-col-2">
        <ul class="social-media-list">
          
          <li>
            <a href="https://github.com/ForwardFinancing"><span class="icon icon--github"><svg viewBox="0 0 16 16" width="16px" height="16px"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
</span><span class="username">ForwardFinancing</span></a>

          </li>
          

          
          <li>
            <a href="https://twitter.com/FWD_Financing"><span class="icon icon--twitter"><svg viewBox="0 0 16 16" width="16px" height="16px"><path fill="#828282" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/></svg>
</span><span class="username">FWD_Financing</span></a>

          </li>
          
        </ul>
      </div>

      <div class="footer-col footer-col-3">
        <p>Technical content being created and curated from the technology group at ForwardFinancing.
</p>
      </div>
    </div>

  </div>

</footer>


  </body>

</html>
